C51 COMPILER V9.60.7.0   LCD                                                               02/22/2025 11:17:15 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE LCD
OBJECT MODULE PLACED IN .\Objects\lcd.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE lcd.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\lcd.l
                    -st) TABS(2) OBJECT(.\Objects\lcd.obj)

line level    source

   1          #include <reg51.h>
   2          #include "delay.h"
   3          
   4          #define lcddata P2
   5          #define dataport P0
   6          
   7          
   8          sbit rs = dataport^0;
   9          sbit rw = dataport^1;
  10          sbit en = dataport^2;
  11          
  12          
  13          
  14          void cmd(char a)
  15          {
  16   1        lcddata=(a & 0xf0);
  17   1        rs=0;
  18   1        rw=0;
  19   1        en=1;
  20   1        delay(1);
  21   1        en=0;
  22   1        
  23   1        lcddata=((a<<4) & 0xf0);
  24   1        rs=0;
  25   1        rw=0;
  26   1        en=1;
  27   1        delay(1);
  28   1        en=0;
  29   1      }
  30          
  31          void dat(char a)
  32          {
  33   1        lcddata=(a & 0xf0);
  34   1        rs=1;
  35   1        rw=0;
  36   1        en=1;
  37   1        delay(1);
  38   1        en=0;
  39   1        
  40   1        lcddata=((a<<4) & 0xf0);
  41   1        rs=1;
  42   1        rw=0;
  43   1        en=1;
  44   1        delay(1);
  45   1        en=0;
  46   1      }
  47          
  48          
  49          
  50          
  51          void mssg(unsigned char *ch)
  52          {
  53   1        while(*ch!='\0')
  54   1        {
C51 COMPILER V9.60.7.0   LCD                                                               02/22/2025 11:17:15 PAGE 2   

  55   2          dat(*ch++);
  56   2        }
  57   1      }
  58          
  59          void init()
  60          {
  61   1        
  62   1        cmd(0x02); //return home 
  63   1        cmd(0x28); //4bit mode
  64   1        cmd(0x0c); //display on cursor off 
  65   1        cmd(0x01); //clear screen
  66   1        cmd(0x80);
  67   1      }
  68          void lcd_timedisplay(char hr,char min, char sec)
  69          {
  70   1        dat(((hr >> 4) & 0x0f) + 0x30);
  71   1        dat((hr & 0x0f) + 0x30);
  72   1        
  73   1        dat(':');
  74   1        
  75   1        dat(((min >> 4) & 0x0f) + 0x30);
  76   1        dat((min & 0x0f) + 0x30);
  77   1        
  78   1        dat(':');
  79   1        dat(((sec >> 4) & 0x0f) + 0x30);
  80   1        dat((sec & 0x0f) + 0x30);
  81   1        
  82   1      }
  83          
  84          
  85          void lcd_datedisplay(char dd,char mm, char yy)
  86          {
  87   1        dat(((dd >> 4) & 0x0f) + 0x30);
  88   1        dat((dd & 0x0f) + 0x30);
  89   1        
  90   1        dat(':');
  91   1        
  92   1        dat(((mm >> 4) & 0x0f) + 0x30);
  93   1        dat((mm & 0x0f) + 0x30);
  94   1        
  95   1        dat(':');
  96   1        dat(((yy >> 4) & 0x0f) + 0x30);
  97   1        dat((yy & 0x0f) + 0x30);
  98   1        
  99   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    303    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      11
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
